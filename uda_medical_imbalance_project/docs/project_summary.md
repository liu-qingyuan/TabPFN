# UDA Medical Imbalance Project - é¡¹ç›®æ€»ç»“

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªä¸“æ³¨äºåŒ»ç–—æ•°æ®ä¸å¹³è¡¡é—®é¢˜ä¸æ— ç›‘ç£åŸŸé€‚åº”ï¼ˆUDAï¼‰çš„ç»¼åˆæ€§æœºå™¨å­¦ä¹ å®éªŒæ¡†æ¶ã€‚åŸºäºæ‚¨æä¾›çš„éœ€æ±‚è§„èŒƒï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç»“æ„åŒ–ã€å¯å¤ç°çš„å®éªŒå¹³å°ã€‚

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### 1. æ•°æ®é¢„å¤„ç†æµç¨‹

- **RFEé¢„ç­›é€‰ç‰¹å¾é›†**ï¼šåŸºäºé€’å½’ç‰¹å¾æ¶ˆé™¤é¢„ç­›é€‰çš„æœ€ä¼˜ç‰¹å¾ç»„åˆ
  - **BEST7ç‰¹å¾é›†**ï¼š7ä¸ªç‰¹å¾ä¸­åŒ…å«2ä¸ªç±»åˆ«ç‰¹å¾ï¼ˆFeature63, Feature46ï¼‰
  - **BEST8ç‰¹å¾é›†**ï¼š8ä¸ªç‰¹å¾ä¸­åŒ…å«2ä¸ªç±»åˆ«ç‰¹å¾ï¼ˆFeature63, Feature46ï¼‰
  - **BEST9ç‰¹å¾é›†**ï¼š9ä¸ªç‰¹å¾ä¸­åŒ…å«2ä¸ªç±»åˆ«ç‰¹å¾ï¼ˆFeature63, Feature46ï¼‰
  - **BEST10ç‰¹å¾é›†**ï¼š10ä¸ªç‰¹å¾ä¸­åŒ…å«3ä¸ªç±»åˆ«ç‰¹å¾ï¼ˆFeature63, Feature46, Feature5ï¼‰
  - **ALL63ç‰¹å¾é›†**ï¼š63ä¸ªç‰¹å¾ä¸­åŒ…å«å¤šä¸ªç±»åˆ«ç‰¹å¾
- **æ ‡å‡†åŒ–å¤„ç†**ï¼šæä¾›StandardScalerã€RobustScalerå’ŒNoScalerï¼ˆä¸æ ‡å‡†åŒ–ï¼‰ä¸‰ç§é€‰æ‹©
- **ç±»åˆ«ä¸å¹³è¡¡å¤„ç†**ï¼šé›†æˆ10ç§ä¸å¹³è¡¡å¤„ç†æ–¹æ³•ï¼ŒåŒ…æ‹¬SMOTEç³»åˆ—ã€ADASYNã€ç»„åˆæ–¹æ³•å’Œæ¬ é‡‡æ ·
- **ç±»åˆ«ç‰¹å¾å¤„ç†**ï¼šè‡ªåŠ¨è¯†åˆ«å’Œå¤„ç†ç±»åˆ«ç‰¹å¾ï¼Œæ”¯æŒæ··åˆæ•°æ®ç±»å‹

### 2. æºåŸŸæ–¹æ³•å¯¹æ¯”

- **10æŠ˜äº¤å‰éªŒè¯**ï¼šç¡®ä¿ç»“æœçš„ç¨³å®šæ€§å’Œå¯é æ€§
- **å¤šæ¨¡å‹æ”¯æŒ**ï¼š
  - TabPFNæ¨¡å‹ï¼ˆè‡ªåŠ¨è¡¨æ ¼æ·±åº¦å­¦ä¹ ï¼‰
  - è®ºæ–‡æ–¹æ³•ï¼ˆé¢†åŸŸç‰¹å®šæ–¹æ³•ï¼‰
  - PKUPHåŸºçº¿æ¨¡å‹ï¼ˆåŒ—äº¬å¤§å­¦äººæ°‘åŒ»é™¢æ ‡å‡†ï¼‰
  - MayoåŸºçº¿æ¨¡å‹ï¼ˆæ¢…å¥¥è¯Šæ‰€æ ‡å‡†ï¼‰

### 3. UDAç®—æ³•ä½“ç³»

#### 3.1 åå˜é‡åç§»æ–¹æ³•
- **DM (Discriminative Method)**ï¼šå®ä¾‹é‡åŠ æƒæ–¹æ³•

#### 3.2 éšè—åå˜é‡åç§»æ–¹æ³•

**çº¿æ€§å’Œæ ¸æ–¹æ³•**ï¼š
- **SA (Subspace Alignment)**ï¼šå­ç©ºé—´å¯¹é½
- **TCA (Transfer Component Analysis)**ï¼šè¿ç§»æˆåˆ†åˆ†æ
- **JDA (Joint Distribution Adaptation)**ï¼šè”åˆåˆ†å¸ƒé€‚åº”
- **CORAL (CORrelation ALignment)**ï¼šç›¸å…³æ€§å¯¹é½

**æ·±åº¦å­¦ä¹ æ–¹æ³•**ï¼š
- **DANN (Domain-Adversarial Neural Networks)**
- **ADDA (Adversarial Discriminative Domain Adaptation)**
- **WDGRL (Wasserstein Distance Guided Representation Learning)**
- **DeepCORAL (Deep CORAL)**
- **MCD (Maximum Classifier Discrepancy)**
- **MDD (Margin Disparity Discrepancy)**
- **CDAN (Conditional Domain Adversarial Network)**

#### 3.3 æœ€ä¼˜ä¼ è¾“æ–¹æ³•
- **POT (Python Optimal Transport)**

### 4. å¯è§†åŒ–åˆ†æ

#### 4.1 åŸŸé€‚åº”å‰åå¯¹æ¯”
- **PCAé™ç»´å¯è§†åŒ–**ï¼šè§‚å¯ŸåŸŸé—´åˆ†å¸ƒå˜åŒ–
- **t-SNEå¯è§†åŒ–**ï¼šéçº¿æ€§é™ç»´å±•ç¤ºèšç±»æ•ˆæœ
- **ç‰¹å¾åˆ†å¸ƒå¯¹æ¯”**ï¼š
  - KLæ•£åº¦è®¡ç®—å’Œå¯è§†åŒ–
  - Wassersteinè·ç¦»åº¦é‡
  - MMDè·ç¦»åˆ†æ

#### 4.2 æ€§èƒ½æŒ‡æ ‡å¯è§†åŒ–
- **ROC-AUCæ›²çº¿**ï¼šå¤šæ–¹æ³•ROCå¯¹æ¯”
- **æ··æ·†çŸ©é˜µ**ï¼šåˆ†ç±»ç»“æœè¯¦ç»†åˆ†æ
- **æ€§èƒ½é›·è¾¾å›¾**ï¼šå¤šæŒ‡æ ‡ç»¼åˆå±•ç¤º
- **æ–¹æ³•å¯¹æ¯”æŸ±çŠ¶å›¾**ï¼šç›´è§‚æ€§èƒ½å¯¹æ¯”

### 5. æ€§èƒ½è¯„ä¼°ä½“ç³»

- **ä¸»è¦æŒ‡æ ‡**ï¼šAUCã€å‡†ç¡®ç‡ã€F1ã€ç²¾ç¡®ç‡ã€å¬å›ç‡
- **ç›®æ ‡åŸŸè¯„ä¼°**ï¼šåŒæ—¶æä¾›åŠ DAå’Œä¸åŠ DAçš„ç»“æœå¯¹æ¯”
- **ç»Ÿè®¡åˆ†æ**ï¼šå‡å€¼ã€æ ‡å‡†å·®ã€æ˜¾è‘—æ€§æ£€éªŒ

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

```
uda_medical_imbalance_project/
â”œâ”€â”€ ğŸ“ config/                    # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ experiment_config.py      # å®éªŒé…ç½®ç±»
â”‚   â””â”€â”€ __init__.py              # æ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ ğŸ“ data/                     # æ•°æ®å¤„ç†
â”‚   â””â”€â”€ loader.py               # åŒ»ç–—æ•°æ®åŠ è½½å™¨
â”œâ”€â”€ ğŸ“ preprocessing/            # æ•°æ®é¢„å¤„ç†
â”‚   â”œâ”€â”€ scalers.py              # æ ‡å‡†åŒ–ï¼ˆStandard/Robustï¼‰
â”‚   â”œâ”€â”€ imbalance_handler.py    # ä¸å¹³è¡¡å¤„ç†ï¼ˆSMOTEç­‰ï¼‰
â”‚   â””â”€â”€ categorical_encoder.py  # ç±»åˆ«ç‰¹å¾ç¼–ç 
â”œâ”€â”€ ğŸ“ uda/                      # æ— ç›‘ç£åŸŸé€‚åº”
â”‚   â”œâ”€â”€ covariate_shift/        # åå˜é‡åç§»æ–¹æ³•
â”‚   â”œâ”€â”€ hidden_shift/           # éšè—åå˜é‡åç§»æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ linear_kernel/      # çº¿æ€§å’Œæ ¸æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ deep/              # æ·±åº¦å­¦ä¹ æ–¹æ³•
â”‚   â”‚   â””â”€â”€ optimal_transport/  # æœ€ä¼˜ä¼ è¾“æ–¹æ³•
â”‚   â””â”€â”€ uda_factory.py          # UDAæ–¹æ³•å·¥å‚
â”œâ”€â”€ ğŸ“ modeling/                 # æœºå™¨å­¦ä¹ æ¨¡å‹
â”‚   â”œâ”€â”€ baseline_models.py      # åŸºçº¿æ¨¡å‹ï¼ˆPKUPHã€Mayoï¼‰
â”‚   â””â”€â”€ paper_methods.py        # è®ºæ–‡æ–¹æ³•å®ç°
â”œâ”€â”€ ğŸ“ evaluation/              # è¯„ä¼°æ¨¡å—
â”‚   â”œâ”€â”€ metrics.py              # è¯„ä¼°æŒ‡æ ‡è®¡ç®—
â”‚   â”œâ”€â”€ cross_validation.py     # äº¤å‰éªŒè¯
â”‚   â”œâ”€â”€ performance_analyzer.py # æ€§èƒ½åˆ†æ
â”‚   â””â”€â”€ comparator.py           # æ–¹æ³•å¯¹æ¯”
â”œâ”€â”€ ğŸ“ visualization/           # å¯è§†åŒ–
â”‚   â”œâ”€â”€ dimensionality_plots.py # PCAã€t-SNEå¯è§†åŒ–
â”‚   â”œâ”€â”€ distribution_plots.py   # ç‰¹å¾åˆ†å¸ƒå¯¹æ¯”
â”‚   â”œâ”€â”€ distance_plots.py       # è·ç¦»åº¦é‡å¯è§†åŒ–
â”‚   â”œâ”€â”€ performance_plots.py    # æ€§èƒ½æŒ‡æ ‡å›¾è¡¨
â”‚   â””â”€â”€ comparison_plots.py     # æ–¹æ³•å¯¹æ¯”å›¾è¡¨
â”œâ”€â”€ ğŸ“ scripts/                 # æ‰§è¡Œè„šæœ¬
â”‚   â”œâ”€â”€ main_experiment.py      # ä¸»å®éªŒè„šæœ¬
â”‚   â””â”€â”€ run_full_uda_experiment.py # å®Œæ•´å®éªŒæµç¨‹
â”œâ”€â”€ ğŸ“ examples/                # ç¤ºä¾‹ä»£ç 
â”‚   â””â”€â”€ quick_start_example.py  # å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
â”œâ”€â”€ ğŸ“ tests/                   # æµ‹è¯•å¥—ä»¶
â”‚   â”œâ”€â”€ test_categorical_features.py    # ç±»åˆ«ç‰¹å¾æµ‹è¯•
â”‚   â”œâ”€â”€ test_real_data_scalers.py       # æ ‡å‡†åŒ–å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_imbalance_handler.py       # ä¸å¹³è¡¡å¤„ç†å™¨æµ‹è¯•
â”‚   â”œâ”€â”€ test_imbalance_comprehensive.py # å…¨é¢ä¸å¹³è¡¡å¤„ç†æµ‹è¯•
â”‚   â”œâ”€â”€ imgs/                           # æµ‹è¯•ç”Ÿæˆçš„å›¾åƒ
â”‚   â”‚   â”œâ”€â”€ scalers/                    # æ ‡å‡†åŒ–å™¨æµ‹è¯•å›¾åƒ
â”‚   â”‚   â””â”€â”€ imbalance_handler/          # ä¸å¹³è¡¡å¤„ç†å™¨æµ‹è¯•å›¾åƒ
â”‚   â”œâ”€â”€ conftest.py                     # æµ‹è¯•é…ç½®
â”‚   â””â”€â”€ __init__.py                     # æµ‹è¯•æ¨¡å—åˆå§‹åŒ–
â”œâ”€â”€ ğŸ“ utils/                   # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“ docs/                    # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ ğŸ“ configs/                 # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ default_config.yaml    # é»˜è®¤é…ç½®
â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ requirements.txt            # ä¾èµ–åˆ—è¡¨
â””â”€â”€ pytest.ini                 # æµ‹è¯•é…ç½®
```

## ğŸ“Š æ•°æ®ä½¿ç”¨è§„èŒƒ

### æ•°æ®åŸŸå®šä¹‰
- **æºåŸŸ (X_source, Y_source)**ï¼šå…¨éƒ¨æ•°æ®ç”¨äºè®­ç»ƒå’ŒUDAç‰¹å¾å¯¹é½
- **ç›®æ ‡åŸŸ (X_target)**ï¼šå…¨éƒ¨æ— æ ‡ç­¾æ•°æ®ç”¨äºUDAç‰¹å¾å¯¹é½
- **ç›®æ ‡åŸŸæ ‡ç­¾ (Y_target)**ï¼šä»…ç”¨äºæ¨¡å‹æœ€ç»ˆæ€§èƒ½è¯„ä¼°

### æ•°æ®æµç¨‹
```
åŸå§‹æ•°æ® â†’ RFEé¢„ç­›é€‰ç‰¹å¾é›† â†’ æ ‡å‡†åŒ– â†’ ä¸å¹³è¡¡å¤„ç† â†’ UDAå¯¹é½ â†’ æ¨¡å‹è®­ç»ƒ â†’ è¯„ä¼°
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
cd uda_medical_imbalance_project
pip install -r requirements.txt
```

### 2. è¿è¡Œç¤ºä¾‹
```bash
# å¿«é€Ÿå¼€å§‹ç¤ºä¾‹
python examples/quick_start_example.py

# å®Œæ•´å®éªŒæµç¨‹
python scripts/main_experiment.py --log-level INFO
```

### 3. è‡ªå®šä¹‰é…ç½®
```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®è¿è¡Œ
python scripts/run_full_uda_experiment.py --config configs/custom_config.yaml
```

## ğŸ“ˆ å®éªŒé…ç½®ç¤ºä¾‹

```yaml
# æ•°æ®é¢„å¤„ç†é…ç½®
preprocessing:
  feature_set: "best7"         # ç‰¹å¾é›†é€‰æ‹© (best7|best8|best9|best10|all63)
  scaler: "standard"           # æ ‡å‡†åŒ–æ–¹æ³• (standard|robust|none)
  imbalance_method: "smote"    # ä¸å¹³è¡¡å¤„ç†æ–¹æ³• (none|smote|smotenc|borderline_smote|kmeans_smote|svm_smote|adasyn|smote_tomek|smote_enn|random_under)
  categorical_features: []      # ç±»åˆ«ç‰¹å¾åˆ—è¡¨ï¼ˆè‡ªåŠ¨ä»settings.pyè·å–ï¼‰

# UDAæ–¹æ³•é…ç½®
uda:
  linear_kernel_methods:
    - "SA"
    - "TCA" 
    - "JDA"
    - "CORAL"
  deep_methods:
    - "DANN"
    - "DeepCORAL"
  optimal_transport_methods:
    - "POT"

# è¯„ä¼°é…ç½®
evaluation:
  metrics:
    - "auc"
    - "accuracy"
    - "f1"
    - "precision"
    - "recall"
```

## ğŸ¯ å®éªŒè¾“å‡º

### ç»“æœç›®å½•ç»“æ„
```
experiments/experiment_YYYYMMDD_HHMMSS/
â”œâ”€â”€ config/                 # å®éªŒé…ç½®å¤‡ä»½
â”œâ”€â”€ preprocessed_data/      # é¢„å¤„ç†åçš„æ•°æ®
â”œâ”€â”€ uda_results/           # UDAå˜æ¢ç»“æœ
â”œâ”€â”€ model_predictions/     # æ¨¡å‹é¢„æµ‹ç»“æœ
â”œâ”€â”€ evaluation_metrics/    # è¯„ä¼°æŒ‡æ ‡
â”œâ”€â”€ visualizations/        # å¯è§†åŒ–å›¾è¡¨
â”‚   â”œâ”€â”€ pca_plots/
â”‚   â”œâ”€â”€ tsne_plots/
â”‚   â”œâ”€â”€ distribution_plots/
â”‚   â””â”€â”€ performance_plots/
â””â”€â”€ experiment_report.html # å®éªŒæŠ¥å‘Š
```

## ğŸ“ å…³é”®ç‰¹æ€§

### 1. æ¨¡å—åŒ–è®¾è®¡
- æ¯ä¸ªç»„ä»¶ç‹¬ç«‹å¯æµ‹è¯•ã€å¯é…ç½®ã€æ˜“æ‰©å±•
- æ¸…æ™°çš„æ¥å£å®šä¹‰å’Œå·¥å‚æ¨¡å¼

### 2. çµæ´»é…ç½®
- YAMLé…ç½®æ–‡ä»¶æ”¯æŒ
- å‘½ä»¤è¡Œå‚æ•°è¦†ç›–
- å¤šç§é¢„å®šä¹‰é…ç½®æ¨¡æ¿

### 3. å…¨é¢æµ‹è¯•
- å•å…ƒæµ‹è¯•è¦†ç›–
- é›†æˆæµ‹è¯•æ”¯æŒ
- æ€§èƒ½æµ‹è¯•æ¡†æ¶

### 4. ä¸°å¯Œå¯è§†åŒ–
- è‹±æ–‡å›¾åƒæ ‡ç­¾ï¼ˆç¬¦åˆç§‘æŠ€å†™ä½œæ ‡å‡†ï¼‰
- å¤šç»´åº¦å¯¹æ¯”åˆ†æ
- é«˜è´¨é‡å›¾è¡¨è¾“å‡º

### 5. å®éªŒè·Ÿè¸ª
- å®Œæ•´çš„å®éªŒè®°å½•
- å¯é‡ç°çš„å®éªŒé…ç½®
- è¯¦ç»†çš„æ€§èƒ½æŠ¥å‘Š

## ğŸ§ª æµ‹è¯•éªŒè¯

### æ ‡å‡†åŒ–å™¨æµ‹è¯•ç»“æœ

é€šè¿‡è¿è¡Œ `tests/test_real_data_scalers.py`ï¼Œæˆ‘ä»¬éªŒè¯äº†ä¸åŒæ ‡å‡†åŒ–å™¨çš„æ•ˆæœï¼š

#### æ ‡å‡†åŒ–å™¨ç±»å‹
- **StandardScaler**ï¼šåŸºäºå‡å€¼å’Œæ ‡å‡†å·®çš„æ ‡å‡†åŒ–ï¼ˆå‡å€¼0ï¼Œæ ‡å‡†å·®1ï¼‰
- **RobustScaler**ï¼šåŸºäºä¸­ä½æ•°å’ŒIQRçš„é²æ£’æ ‡å‡†åŒ–ï¼ˆä¸­ä½æ•°0ï¼ŒIQRæ ‡å‡†åŒ–ï¼‰
- **NoScaler**ï¼šä¸è¿›è¡Œæ ‡å‡†åŒ–ï¼Œä¿æŒåŸå§‹æ•°æ®ä¸å˜

### ç±»åˆ«ç‰¹å¾æµ‹è¯•ç»“æœ

é€šè¿‡è¿è¡Œ `tests/test_categorical_features.py`ï¼Œæˆ‘ä»¬éªŒè¯äº†ä¸åŒç‰¹å¾é›†çš„ç±»åˆ«ç‰¹å¾é…ç½®ï¼š

#### BEST7ç‰¹å¾é›†åˆ†æï¼ˆRFEé¢„ç­›é€‰ï¼‰
- **æ€»ç‰¹å¾æ•°**ï¼š7ä¸ª
- **ç±»åˆ«ç‰¹å¾**ï¼š2ä¸ªï¼ˆFeature63, Feature46ï¼‰
- **æ•°å€¼ç‰¹å¾**ï¼š5ä¸ªï¼ˆFeature2, Feature39, Feature42, Feature43, Feature56ï¼‰
- **ç±»åˆ«ç‰¹å¾æ¯”ä¾‹**ï¼š28.6%

#### BEST8ç‰¹å¾é›†åˆ†æï¼ˆRFEé¢„ç­›é€‰ï¼‰
- **æ€»ç‰¹å¾æ•°**ï¼š8ä¸ª
- **ç±»åˆ«ç‰¹å¾**ï¼š2ä¸ªï¼ˆFeature63, Feature46ï¼‰
- **æ•°å€¼ç‰¹å¾**ï¼š6ä¸ªï¼ˆFeature2, Feature61, Feature56, Feature42, Feature39, Feature43ï¼‰
- **ç±»åˆ«ç‰¹å¾æ¯”ä¾‹**ï¼š25.0%

#### BEST9ç‰¹å¾é›†åˆ†æï¼ˆRFEé¢„ç­›é€‰ï¼‰
- **æ€»ç‰¹å¾æ•°**ï¼š9ä¸ª
- **ç±»åˆ«ç‰¹å¾**ï¼š2ä¸ªï¼ˆFeature63, Feature46ï¼‰
- **æ•°å€¼ç‰¹å¾**ï¼š7ä¸ªï¼ˆFeature2, Feature61, Feature56, Feature42, Feature39, Feature43, Feature48ï¼‰
- **ç±»åˆ«ç‰¹å¾æ¯”ä¾‹**ï¼š22.2%

#### BEST10ç‰¹å¾é›†åˆ†æï¼ˆRFEé¢„ç­›é€‰ï¼‰
- **æ€»ç‰¹å¾æ•°**ï¼š10ä¸ª
- **ç±»åˆ«ç‰¹å¾**ï¼š3ä¸ªï¼ˆFeature63, Feature46, Feature5ï¼‰
- **æ•°å€¼ç‰¹å¾**ï¼š7ä¸ªï¼ˆFeature2, Feature61, Feature56, Feature42, Feature39, Feature43, Feature48ï¼‰
- **ç±»åˆ«ç‰¹å¾æ¯”ä¾‹**ï¼š30.0%

#### ALLç‰¹å¾é›†åˆ†æ
- **æ€»ç‰¹å¾æ•°**ï¼š58ä¸ª
- **ç±»åˆ«ç‰¹å¾**ï¼š20ä¸ª
- **æ•°å€¼ç‰¹å¾**ï¼š38ä¸ª
- **ç±»åˆ«ç‰¹å¾æ¯”ä¾‹**ï¼š34.5%

### ä¸å¹³è¡¡å¤„ç†å™¨æµ‹è¯•ç»“æœ

é€šè¿‡è¿è¡Œ `tests/test_imbalance_comprehensive.py`ï¼Œæˆ‘ä»¬éªŒè¯äº†10ç§ä¸å¹³è¡¡å¤„ç†æ–¹æ³•çš„æ•ˆæœï¼š

#### æ”¯æŒçš„ä¸å¹³è¡¡å¤„ç†æ–¹æ³•
- **none**ï¼šä¸è¿›è¡Œé‡é‡‡æ ·ï¼Œä¿æŒåŸå§‹æ•°æ®åˆ†å¸ƒ
- **smote**ï¼šæ ‡å‡†SMOTEåˆæˆå°‘æ•°ç±»æ ·æœ¬
- **smotenc**ï¼šå¤„ç†ç±»åˆ«ç‰¹å¾çš„SMOTEå˜ä½“
- **borderline_smote**ï¼šè¾¹ç•Œçº¿SMOTEï¼Œå…³æ³¨è¾¹ç•ŒåŒºåŸŸæ ·æœ¬
- **kmeans_smote**ï¼šåŸºäºK-meansèšç±»çš„SMOTE
- **svm_smote**ï¼šåŸºäºSVMçš„SMOTEå˜ä½“
- **adasyn**ï¼šè‡ªé€‚åº”åˆæˆé‡‡æ ·ï¼Œæ ¹æ®å¯†åº¦ç”Ÿæˆæ ·æœ¬
- **smote_tomek**ï¼šSMOTE + Tomek Linksæ¸…ç†ç»„åˆæ–¹æ³•
- **smote_enn**ï¼šSMOTE + Edited Nearest Neighboursæ¸…ç†ç»„åˆæ–¹æ³•
- **random_under**ï¼šéšæœºæ¬ é‡‡æ ·å¤šæ•°ç±»

#### æµ‹è¯•æ•°æ®é›†ç‰¹å¾
- **åŸå§‹æ•°æ®**ï¼š295ä¸ªæ ·æœ¬ï¼ˆ106æ­£ä¾‹ï¼Œ189è´Ÿä¾‹ï¼‰ï¼Œä¸å¹³è¡¡æ¯”ä¾‹çº¦1:1.78
- **ç‰¹å¾é›†**ï¼šä½¿ç”¨BEST10ç‰¹å¾é›†ï¼ˆ10ä¸ªç‰¹å¾ï¼ŒåŒ…å«3ä¸ªç±»åˆ«ç‰¹å¾ï¼‰
- **ç±»åˆ«ç‰¹å¾**ï¼šFeature63, Feature46, Feature5

#### å¤„ç†æ•ˆæœæ‘˜è¦
- **è¿‡é‡‡æ ·æ–¹æ³•**ï¼šç”Ÿæˆ377-378ä¸ªæ ·æœ¬ï¼Œå®ç°å®Œå…¨æˆ–æ¥è¿‘å®Œå…¨å¹³è¡¡
- **ç»„åˆæ–¹æ³•**ï¼šåœ¨è¿‡é‡‡æ ·åŸºç¡€ä¸Šæ¸…ç†å™ªå£°ï¼Œæ ·æœ¬æ•°ç•¥å°‘äºçº¯è¿‡é‡‡æ ·
- **æ¬ é‡‡æ ·æ–¹æ³•**ï¼šå‡å°‘åˆ°212ä¸ªæ ·æœ¬ï¼Œå®ç°å®Œå…¨å¹³è¡¡ä½†ä¿¡æ¯æŸå¤±è¾ƒå¤§

#### å¯è§†åŒ–è¾“å‡º
æµ‹è¯•ç”Ÿæˆçš„å¯è§†åŒ–å›¾åƒä¿å­˜åœ¨ `tests/imgs/imbalance_handler/` ç›®å½•ï¼š
- **ç»¼åˆå¯¹æ¯”å›¾**ï¼š6ä¸ªå­å›¾å±•ç¤ºä¸åŒæ–¹æ³•çš„æ•ˆæœå¯¹æ¯”
- **PCAé™ç»´å¯è§†åŒ–**ï¼šå±•ç¤ºå„æ–¹æ³•å¤„ç†å‰åçš„2Dæ•°æ®åˆ†å¸ƒ
- **t-SNEé™ç»´å¯è§†åŒ–**ï¼šéçº¿æ€§é™ç»´å±•ç¤ºèšç±»æ•ˆæœ
- **è¯¦ç»†ç»Ÿè®¡è¡¨æ ¼**ï¼šå„æ–¹æ³•çš„æ ·æœ¬æ•°é‡å’Œå¹³è¡¡æ”¹å–„è¯„åˆ†

### æµ‹è¯•è¿è¡Œæ–¹å¼

```bash
# è¿è¡Œæ ‡å‡†åŒ–å™¨æµ‹è¯•ï¼ˆåŒ…å«å¯è§†åŒ–ï¼‰
cd uda_medical_imbalance_project
python tests/test_real_data_scalers.py

# è¿è¡Œç±»åˆ«ç‰¹å¾æµ‹è¯•
python tests/test_categorical_features.py

# è¿è¡Œä¸å¹³è¡¡å¤„ç†å™¨æµ‹è¯•
python tests/test_imbalance_handler.py

# è¿è¡Œå…¨é¢ä¸å¹³è¡¡å¤„ç†æµ‹è¯•ï¼ˆåŒ…å«å¯è§†åŒ–ï¼‰
python tests/test_imbalance_comprehensive.py

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest tests/ -v
```

## ğŸ”¬ æŠ€æœ¯å®ç°ç»†èŠ‚

### ä¸å¹³è¡¡å¤„ç†å™¨å®ç°ç‰¹ç‚¹

#### 1. æ™ºèƒ½ç±»åˆ«ç‰¹å¾å¤„ç†
- **è‡ªåŠ¨æ£€æµ‹**ï¼šé€šè¿‡`settings.py`ä¸­çš„`get_categorical_features_for_feature_set()`å‡½æ•°è‡ªåŠ¨è·å–ç±»åˆ«ç‰¹å¾ç´¢å¼•
- **æ··åˆæ•°æ®æ”¯æŒ**ï¼šæ‰€æœ‰æ–¹æ³•éƒ½èƒ½æ­£ç¡®å¤„ç†åŒ…å«ç±»åˆ«ç‰¹å¾çš„æ··åˆæ•°æ®ç±»å‹
- **SMOTENCé›†æˆ**ï¼šç»„åˆæ–¹æ³•ï¼ˆSMOTETomekã€SMOTEENNï¼‰è‡ªåŠ¨ä½¿ç”¨SMOTENCä½œä¸ºåŸºç¡€SMOTEæ–¹æ³•

#### 2. ç»„åˆæ–¹æ³•é…ç½®ç­–ç•¥
```python
# SMOTETomeké…ç½®ï¼šSMOTENC + Tomek Linksæ¸…ç†
if categorical_indices:
    smote_sampler = SMOTENC(categorical_features=categorical_indices, random_state=42)
else:
    smote_sampler = SMOTE(random_state=42)
sampler = SMOTETomek(smote=smote_sampler, random_state=42)

# SMOTEENNé…ç½®ï¼šSMOTENC + ENNæ¸…ç†  
if categorical_indices:
    smote_sampler = SMOTENC(categorical_features=categorical_indices, random_state=42)
else:
    smote_sampler = SMOTE(random_state=42)
sampler = SMOTEENN(smote=smote_sampler, random_state=42)
```

#### 3. å¹³è¡¡åˆ¤æ–­é€»è¾‘
- **ä¸å¹³è¡¡é˜ˆå€¼**ï¼šå½“å°‘æ•°ç±»æ¯”ä¾‹ < 0.5æ—¶åˆ¤æ–­ä¸ºä¸å¹³è¡¡
- **æ™ºèƒ½è·³è¿‡**ï¼šå¯¹äºå·²ç»å¹³è¡¡çš„æ•°æ®é›†ï¼ŒæŸäº›æ–¹æ³•ä¼šæ™ºèƒ½è·³è¿‡é‡é‡‡æ ·
- **å¼ºåˆ¶æ‰§è¡Œæ¨¡å¼**ï¼šæµ‹è¯•æ¨¡å¼ä¸‹å¯å¼ºåˆ¶æ‰§è¡Œæ‰€æœ‰æ–¹æ³•ä»¥ä¾¿å¯¹æ¯”åˆ†æ

#### 4. å¯è§†åŒ–é›†æˆ
- **PCAé™ç»´**ï¼š2Då¯è§†åŒ–å±•ç¤ºé‡é‡‡æ ·å‰åçš„æ•°æ®åˆ†å¸ƒå˜åŒ–
- **t-SNEé™ç»´**ï¼šéçº¿æ€§é™ç»´æ­ç¤ºæ•°æ®çš„èšç±»ç»“æ„
- **ç»Ÿè®¡å¯¹æ¯”**ï¼šè¯¦ç»†çš„æ ·æœ¬æ•°é‡ã€å¹³è¡¡æ¯”ä¾‹ã€æ”¹å–„è¯„åˆ†ç»Ÿè®¡
- **æ–¹æ³•åˆ†ç»„**ï¼šæŒ‰è¿‡é‡‡æ ·ã€ç»„åˆæ–¹æ³•ã€æ¬ é‡‡æ ·åˆ†ç»„å±•ç¤ºæ•ˆæœ

## ğŸ”§ æŠ€æœ¯æ ˆ

- **æ ¸å¿ƒæ¡†æ¶**ï¼šPython 3.8+, NumPy, Pandas, Scikit-learn
- **æ·±åº¦å­¦ä¹ **ï¼šPyTorchï¼ŒTF
- **åŸŸé€‚åº”**ï¼šAdapt-python
- **ä¸å¹³è¡¡å¤„ç†**ï¼šImbalanced-learn
- **å¯è§†åŒ–**ï¼šMatplotlib, Seaborn, Plotly
- **é…ç½®ç®¡ç†**ï¼šPyYAML, Hydra
- **æµ‹è¯•æ¡†æ¶**ï¼šPytest
- **å®éªŒè·Ÿè¸ª**ï¼šMLflow, WandB

## ğŸ“ ç¬¦åˆé¡¹ç›®è§„åˆ™

æœ¬é¡¹ç›®ä¸¥æ ¼éµå¾ªTabPFNé¡¹ç›®è§„åˆ™ï¼š

1. **åŒ»ç–—æ•°æ®å¤„ç†æ¨¡å¼**ï¼šæ ‡å‡†åŒ–å¤„ç†æµç¨‹ï¼Œè·¨æ•°æ®é›†ç»Ÿä¸€æ€§
2. **è·¨æ•°æ®é›†å®éªŒå‘½å**ï¼šæŒ‰A/B/Cæ ‡è¯†ä¸åŒæ•°æ®é›†
3. **ç‰¹å¾é€‰æ‹©ç­–ç•¥**ï¼šRFEä¸ºä¸»ï¼Œå…³æ³¨6-8ä¸ªç‰¹å¾çš„æ€§èƒ½
4. **ç»“æœç›®å½•ç»„ç»‡**ï¼šç‹¬ç«‹resultsç›®å½•ï¼Œå¯è§£é‡Šæ€§åˆ†æå­ç›®å½•
5. **æ¨¡å‹è¯„ä¼°æ ‡å‡†**ï¼šAUCä¸ºä¸»è¦æŒ‡æ ‡ï¼Œè€ƒè™‘å¤šæŒ‡æ ‡ç¨³å®šæ€§

## ğŸ¤ ä½¿ç”¨å»ºè®®

1. **å¼€å§‹å®éªŒå‰**ï¼šä»”ç»†é˜…è¯»é…ç½®æ–‡ä»¶ï¼Œæ ¹æ®æ•°æ®é›†ç‰¹ç‚¹è°ƒæ•´å‚æ•°
2. **ç‰¹å¾é€‰æ‹©**ï¼šå»ºè®®ä»7ä¸ªç‰¹å¾å¼€å§‹ï¼Œé€æ­¥å¢åŠ åˆ°10ä¸ªè¿›è¡Œå¯¹æ¯”
3. **UDAæ–¹æ³•é€‰æ‹©**ï¼šå…ˆæµ‹è¯•ç®€å•æ–¹æ³•ï¼ˆCORALã€SAï¼‰ï¼Œå†å°è¯•å¤æ‚æ–¹æ³•
4. **æ€§èƒ½è¯„ä¼°**ï¼šé‡ç‚¹å…³æ³¨AUCå’ŒF1åˆ†æ•°ï¼Œè€ƒè™‘åŒ»ç–—åœºæ™¯çš„ç‰¹æ®Šéœ€æ±‚
5. **ç»“æœè§£é‡Š**ï¼šç»“åˆå¯è§†åŒ–åˆ†æç†è§£åŸŸé€‚åº”çš„æ•ˆæœ

## ğŸ“š è¿›ä¸€æ­¥æ‰©å±•

- æ·»åŠ æ›´å¤šåŒ»ç–—æ•°æ®é›†æ”¯æŒ
- é›†æˆæ›´å¤šå…ˆè¿›çš„åŸŸé€‚åº”æ–¹æ³•
- æ·»åŠ è‡ªåŠ¨è¶…å‚æ•°ä¼˜åŒ–
- æ”¯æŒå¤šGPUå¹¶è¡Œè®­ç»ƒ
- é›†æˆæ¨¡å‹è§£é‡Šæ€§åˆ†æå·¥å…·

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®éµå¾ªä¸­æ–‡å›å¤ + è‹±æ–‡å›¾åƒæ ‡ç­¾çš„ç»Ÿä¸€è¯­è¨€è¾“å‡ºé£æ ¼ï¼Œç¡®ä¿ç§‘ç ”æ ‡å‡†çš„å›¾è¡¨è´¨é‡ã€‚ 